# LST anomaly
cols <- rev(brewer.pal(11, "RdYlBu"))
min_scale_r <- -15 ; max_scale_r <- 15  # scale range
gLST <- ggplot(df_all %>% filter(variable == 'LST')) +
geom_raster(aes(x = x, y = y, fill = diff_obsSmean)) +
facet_grid(hw~.) +
scale_fill_gradientn('LST bias shift [K]',
colours = cols, limits = c(min_scale_r, max_scale_r), oob = squish) +
gds + lgd
gGEN <- ggplot(df_all %>% filter(variable == 'LST')) +
geom_raster(aes(x = x, y = y, fill = diff_obsSmean)) +
facet_grid(hw~.) +
scale_fill_gradientn('LST bias shift [K]',
colours = cols, limits = c(min_scale_r, max_scale_r), oob = squish) +
gds + lgd
gGEN
gALB <- ggplot(df_all %>% filter(variable == 'albedo_wsa_vis')) +
geom_raster(aes(x = x, y = y, fill = diff_simSobsSmean)) +
facet_grid(hw~.) +
coord_cartesian(expand = F) +
scale_fill_gradientn('Albedo bias shift [.]',
colours = cols, limits = c(min_scale_r, max_scale_r), oob = squish) +
gds + lgd
gALB
# Albedo shift
cols <- rev(brewer.pal(11, "PuOr"))
min_scale_r <- -0.05 ; max_scale_r <- 0.05
gALB <- ggplot(df_all %>% filter(variable == 'albedo_wsa_vis')) +
geom_raster(aes(x = x, y = y, fill = diff_simSobsSmean)) +
facet_grid(hw~.) +
coord_cartesian(expand = F) +
scale_fill_gradientn('Albedo bias shift [.]',
colours = cols, limits = c(min_scale_r, max_scale_r), oob = squish) +
gds + lgd
gALB
gALB <- ggplot(df_all %>% filter(variable == 'albedo_wsa_vis')) +
geom_raster(aes(x = x, y = y, fill = diff_simSobsSmean)) +
facet_grid(hw~.) +
coord_cartesian(expand = F) +
scale_fill_gradientn('Albedo bias shift [.]',
colours = rev(brewer.pal(11, "PuOr")),
limits = c(-0.05, 0.05), oob = squish) +
gds + lgd
gALB
# LST shift
gLST <- ggplot(df_all %>% filter(variable == 'LST')) +
geom_raster(aes(x = x, y = y, fill = diff_simSobsSmean)) +
facet_grid(hw~.) +
scale_fill_gradientn('LST bias shift [K]',
colours = rev(brewer.pal(11, "RdBu")),
limits = c(-4.5, 4.5),
oob = squish) +
gds + lgd
gLST
# LST anomaly
gGEN <- ggplot(df_all %>% filter(variable == 'LST')) +
geom_raster(aes(x = x, y = y, fill = diff_obsSmean)) +
facet_grid(hw~.) +
coord_cartesian(expand = F) +
scale_fill_gradientn('LST bias shift [K]',
colours = rev(brewer.pal(11, "RdYlBu")),
limits = c(-15, 15),
oob = squish) +
gds + lgd
gGEN
# LST shift
gLST <- ggplot(df_all %>% filter(variable == 'LST')) +
geom_raster(aes(x = x, y = y, fill = diff_simSobsSmean)) +
facet_grid(hw~.) +
coord_cartesian(expand = F) +
scale_fill_gradientn('LST bias shift [K]',
colours = rev(brewer.pal(11, "RdBu")),
limits = c(-4.5, 4.5),
oob = squish) +
gds + lgd
# LAI shift
gLAI <- ggplot(df_all %>% filter(variable == 'LAI')) +
geom_raster(aes(x = x, y = y, fill = diff_simSobsSmean)) +
facet_grid(hw~.) +
coord_cartesian(expand = F) +
scale_fill_gradientn('LAI bias shift [m2/m2]',
colours = rev(brewer.pal(11, "BrBG")),
limits = c(-1.5, 1.5),
oob = squish) +
gds + lgd
# E shift
gEVA <- ggplot(df_all %>% filter(variable == 'E')) +
geom_raster(aes(x = x, y = y, fill = diff_simSobsSmean)) +
facet_grid(hw~.) +
coord_cartesian(expand = F) +
scale_fill_gradientn('Evaporation bias shift [mm]',
colours = rev(brewer.pal(11, "PRGn")),
limits = c(-50, 50),
oob = squish) +
gds + lgd
# Albedo shift
gALB <- ggplot(df_all %>% filter(variable == 'albedo_wsa_vis')) +
geom_raster(aes(x = x, y = y, fill = diff_simSobsSmean)) +
facet_grid(hw~.) +
coord_cartesian(expand = F) +
scale_fill_gradientn('Albedo bias shift [.]',
colours = rev(brewer.pal(11, "PuOr")),
limits = c(-0.05, 0.05), oob = squish) +
gds + lgd
require(patchwork)
g <- gGEN + gLST + gLAI + gEVA + gALB
g <- gGEN + gLST + gLAI + gEVA + gALB
# plotting details, in case not inherited...
if(exists('fig.path') != T){ fig.path <- 'paper/figures/'}
if(exists('fig.fmt') != T){ fig.fmt <- 'png'}
dir.create(path = fig.path, recursive = T, showWarnings = F)
fig.name <- 'heatwaves'
ggsave(filename = paste0(fig.name, '.', fig.format), plot = g,
path = fig.path, width = 14, height = 8)
ggsave(filename = paste0(fig.name, '.', fig.fmt), plot = g,
path = fig.path, width = 14, height = 8)
g <- gGEN + gLST + gLAI + gEVA + gALB + plot_layout(ncol = 5)
# plotting details, in case not inherited...
if(exists('fig.path') != T){ fig.path <- 'paper/figures/'}
if(exists('fig.fmt') != T){ fig.fmt <- 'png'}
dir.create(path = fig.path, recursive = T, showWarnings = F)
fig.name <- 'heatwaves'
ggsave(filename = paste0(fig.name, '.', fig.fmt), plot = g,
path = fig.path, width = 14, height = 8)
# some graphic param...
lgd <- theme(legend.position = 'top',
legend.key.width = unit(1.5, units = 'cm'),
panel.grid = element_blank(),
strip.text = element_text(size = 12))
gds <- guides(fill = guide_colorbar(title.position = 'top', title.hjust = 0.5,
frame.colour = 'black', ticks.colour = 'black'))
ggsave(filename = paste0(fig.name, '.', fig.fmt), plot = g,
path = fig.path, width = 14, height = 8)
source('~/work/workspace/f4p-era5-analysis/code/figures_for_paper/plot_heatwaves.R')
# some graphic param...
lgd <- theme(legend.position = 'top',
legend.key.width = unit(1.2, units = 'cm'),
panel.grid = element_blank(),
strip.text = element_text(size = 12))
gds <- guides(fill = guide_colorbar(title.position = 'top', title.hjust = 0.5,
frame.colour = 'black', ticks.colour = 'black'))
# LST anomaly
gGEN <- ggplot(df_all %>% filter(variable == 'LST')) +
geom_raster(aes(x = x, y = y, fill = diff_obsSmean)) +
facet_grid(hw~.) +
coord_cartesian(expand = F) +
scale_fill_gradientn('LST bias shift [K]',
colours = rev(brewer.pal(11, "RdYlBu")),
limits = c(-15, 15),
oob = squish) +
gds + lgd
gGEN
# some graphic param...
lgd <- theme(legend.position = 'top',
legend.key.width = unit(1.2, units = 'cm'),
panel.grid = element_blank(),
axis.title = element_blank(),
strip.text = element_text(size = 12))
gds <- guides(fill = guide_colorbar(title.position = 'top', title.hjust = 0.5,
frame.colour = 'black', ticks.colour = 'black'))
# LST anomaly
gGEN <- ggplot(df_all %>% filter(variable == 'LST')) +
geom_raster(aes(x = x, y = y, fill = diff_obsSmean)) +
facet_grid(hw~.) +
coord_cartesian(expand = F) +
scale_fill_gradientn('LST anomaly [K]',
colours = rev(brewer.pal(11, "RdYlBu")),
limits = c(-15, 15),
oob = squish) +
gds + lgd
gGEN
source('~/work/workspace/f4p-era5-analysis/code/figures_for_paper/plot_heatwaves.R', echo=TRUE)
bb_shapefile
bb_shapefile <- "data/input_data/vector_layers/ne_50m_wgs84_bounding_box.shp"
layer <- ogrListLayers(bb_shapefile)
ogrInfo(bb_shapefile, layer=layer)
plot(bb_poly)
grat30_lines <- readOGR(grat30_shapefile, layer=layer)
ogrInfo(grat30_shapefile, layer=layer)
grat30_lines <- readOGR(grat30_shapefile, layer=layer)
grat30_lines
require(sf)
cst <- st_as_sf(x = coast_shapefile)
world <- sf::st_read(coast_shapefile, quiet = TRUE)
world
plot(world)
laes_prj <- "+proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs"
europe_laea <- sf::st_intersection(world, st_set_crs(
st_as_sf(as(raster::extent(-10, 55, 26, 72), "SpatialPolygons")), st_crs(world))) %>%
st_transform(laes_prj)
plot(europe_laea)
europe_laea
# LS T anomaly
gGEN <- ggplot(df_all %>% filter(variable == 'LST')) +
geom_raster(aes(x = x, y = y, fill = diff_obsSmean)) +
facet_grid(hw~.) +
coord_cartesian(expand = F) +
scale_fill_gradientn('LST anomaly [K]',
colours = rev(brewer.pal(11, "RdYlBu")),
limits = c(-15, 15),
oob = squish) +
gds + lgd
gGEN
landColor <- 'grey60'
gGEN <- ggplot(df_all %>% filter(variable == 'LST')) +
geom_sf(data = europe_laea, fill = landColor) +
geom_raster(aes(x = x, y = y, fill = diff_obsSmean)) +
facet_grid(hw~.) +
coord_cartesian(expand = F) +
scale_fill_gradientn('LST anomaly [K]',
colours = rev(brewer.pal(11, "RdYlBu")),
limits = c(-15, 15),
oob = squish) +
gds + lgd
gGEN <- ggplot(df_all %>% filter(variable == 'LST')) +
geom_sf(data = europe_laea, fill = landColor) +
geom_raster(aes(x = x, y = y, fill = diff_obsSmean)) +
facet_grid(hw~.) +
coord_sf(expand = F) +
scale_fill_gradientn('LST anomaly [K]',
colours = rev(brewer.pal(11, "RdYlBu")),
limits = c(-15, 15),
oob = squish) +
gds + lgd
gGEN
land_shapefile <- "data/input_data/vector_layers/ne_50m_land.shp"
world <- sf::st_read(land_shapefile, quiet = TRUE)
laes_prj <- "+proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs"
europe_laea <- sf::st_intersection(world, st_set_crs(
st_as_sf(as(raster::extent(-10, 55, 26, 72), "SpatialPolygons")), st_crs(world))) %>%
st_transform(laes_prj)
gGEN <- ggplot(df_all %>% filter(variable == 'LST')) +
geom_sf(data = europe_laea, fill = landColor) +
geom_raster(aes(x = x, y = y, fill = diff_obsSmean)) +
facet_grid(hw~.) +
coord_sf(expand = F) +
scale_fill_gradientn('LST anomaly [K]',
colours = rev(brewer.pal(11, "RdYlBu")),
limits = c(-15, 15),
oob = squish) +
gds + lgd
gGEN
europe_laea
world <- sf::st_read(land_shapefile, quiet = TRUE)
land_shapefile <- "data/input_data/vector_layers/ne_50m_land.shp"
world <- sf::st_read(land_shapefile, quiet = TRUE)
land_shapefile <- "data/input_data/vector_layers/ne_50m_land.shp"
world <- sf::st_read(coast_shapefile, quiet = TRUE)
world <- sf::st_read(land_shapefile, quiet = TRUE)
laes_prj <- "+proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs"
europe_laea <- sf::st_intersection(world, st_set_crs(
st_as_sf(as(raster::extent(-10, 55, 26, 72), "SpatialPolygons")), st_crs(world))) %>%
st_transform(laes_prj)
gGEN <- ggplot(df_all %>% filter(variable == 'LST')) +
geom_sf(data = europe_laea, fill = landColor) +
geom_raster(aes(x = x, y = y, fill = diff_obsSmean)) +
facet_grid(hw~.) +
coord_sf(expand = F) +
scale_fill_gradientn('LST anomaly [K]',
colours = rev(brewer.pal(11, "RdYlBu")),
limits = c(-15, 15),
oob = squish) +
gds + lgd
gGEN
# some graphic param...
lgd <- theme(legend.position = 'top',
legend.key.width = unit(1.2, units = 'cm'),
# panel.grid = element_blank(),
axis.title = element_blank(),
strip.text = element_text(size = 12))
gds <- guides(fill = guide_colorbar(title.position = 'top', title.hjust = 0.5,
frame.colour = 'black', ticks.colour = 'black'))
landColor <- 'grey60'
gGEN <- ggplot(df_all %>% filter(variable == 'LST')) +
geom_sf(data = europe_laea, fill = landColor) +
geom_raster(aes(x = x, y = y, fill = diff_obsSmean)) +
facet_grid(hw~.) +
coord_sf(expand = F) +
scale_fill_gradientn('LST anomaly [K]',
colours = rev(brewer.pal(11, "RdYlBu")),
limits = c(-15, 15),
oob = squish) +
gds + lgd
gGEN
head(df_all)
europe_laea
head(europe_laea)
st_crs(europe_laea)
df_xy_plat <- st_sfc(df_all$x, df_all$y, crs = 4326)
df_xy_plat <- st_sfc(df_all$x, df_all$y, crs = 4326)
data.frame(a=1:2, geom=sfc)
st_point()
?st_point()
df_xy_plat <- st_sfc(st_multipoint(x = df_all[,c(x,y)], dim = 'XY'), crs = 4326)
df_all
df_all$x
df_all[,c('x','y')]
df_xy_plat <- st_sfc(st_multipoint(x = df_all[,c('x','y')], dim = 'XY'), crs = 4326)
df_all[,c('x','y')]
x = df_all[,c('x','y')]
class(x)
df_xy_plat <- st_sfc(st_multipoint(x = as.matrix(df_all[,c('x','y')]), dim = 'XY'), crs = 4326)
df_xy_plat
plot(df_xy_plat)
ptlist_xy_plat <- st_sfc(st_multipoint(x = as.matrix(df_all[,c('x','y')]), dim = 'XY'), crs = 4326)
ptlist_xy_laea <- st_transform(ptlist_xy_plat, crs = laes_prj)
ptlist_xy_laea
plot(ptlist_xy_laea)
df_all
ptlist_xy_laea
class(ptlist_xy_laea)
st_coordinates(ptlist_xy_laea) %>% heac()
st_coordinates(ptlist_xy_laea) %>% head()
df_all <- df_all %>% bind_cols(st_coordinates(ptlist_xy_laea))
head(df_all)
head(st_coordinates(ptlist_xy_laea))
new_coord <- st_coordinates(ptlist_xy_laea)
new_coord
head(new_coord)
new_coord <- st_coordinates(ptlist_xy_laea) %>% select(-L1)
require(tidyr)
new_coord <- st_coordinates(ptlist_xy_laea) %>% select(-L1)
new_coord <- st_coordinates(ptlist_xy_laea) %>% tidyr::select(-L1)
new_coord <- st_coordinates(ptlist_xy_laea) %>% dplyr::selct(-L1)
new_coord <- st_coordinates(ptlist_xy_laea) %>% dplyr::select(-L1)
new_coord <- st_coordinates(ptlist_xy_laea)new_coord
new_coord
new_coord[X]
new_coord['X']
new_coord
head(new_coord)
new_coord[,'X']
df_all$x_laea <- new_coord[,'X']
df_all$y_laea <- new_coord[,'Y']
gGEN <- ggplot(df_all %>% filter(variable == 'LST')) +
geom_sf(data = europe_laea, fill = landColor) +
geom_raster(aes(x = x_laea, y = y_laea, fill = diff_obsSmean)) +
facet_grid(hw~.) +
coord_sf(expand = F) +
scale_fill_gradientn('LST anomaly [K]',
colours = rev(brewer.pal(11, "RdYlBu")),
limits = c(-15, 15),
oob = squish) +
gds + lgd
gGEN
gGEN <- ggplot(df_all %>% filter(variable == 'LST')) +
geom_sf(data = world, fill = landColor) +
geom_raster(aes(x = x_laea, y = y_laea, fill = diff_obsSmean)) +
facet_grid(hw~.) +
coord_sf(expand = F) +
scale_fill_gradientn('LST anomaly [K]',
colours = rev(brewer.pal(11, "RdYlBu")),
limits = c(-15, 15),
oob = squish) +
gds + lgd
gGEN
gGEN <- ggplot(df_all %>% filter(variable == 'LST')) +
geom_sf(data = world, fill = landColor) +
geom_raster(aes(x = x, y = y, fill = diff_obsSmean)) +
facet_grid(hw~.) +
coord_sf(expand = F) +
scale_fill_gradientn('LST anomaly [K]',
colours = rev(brewer.pal(11, "RdYlBu")),
limits = c(-15, 15),
oob = squish) +
gds + lgd
gGEN
min(df_all$x)
max(df_all$x)
max(df_all$y)
min(df_all$y)
ocean_shapefile <- "data/input_data/vector_layers/ne_50m_ocean.shp"
ocean <- sf::st_read(ocean_shapefile, quiet = TRUE)
ocean_europe <- sf::st_intersection(ocean, st_set_crs(
st_as_sf(as(raster::extent(-12, 58, 36, 71), "SpatialPolygons")), st_crs(ocean)))
ocean_europe
gGEN <- ggplot(df_all %>% filter(variable == 'LST')) +
geom_raster(aes(x = x, y = y, fill = diff_obsSmean)) +
geom_sf(data = ocean_europe, fill = landColor) +
facet_grid(hw~.) +
coord_sf(expand = F) +
scale_fill_gradientn('LST anomaly [K]',
colours = rev(brewer.pal(11, "RdYlBu")),
limits = c(-15, 15),
oob = squish) +
gds + lgd
gGEN
ocean_shapefile <- "data/input_data/vector_layers/ne_50m_ocean.shp"
ocean <- sf::st_read(ocean_shapefile, quiet = TRUE)
ocean_europe <- sf::st_intersection(ocean, st_set_crs(
st_as_sf(as(raster::extent(-12, 58, 36, 71), "SpatialPolygons")), st_crs(ocean)))
ocean_europe
plot(ocean_europe)
ocean <- sf::st_read(ocean_shapefile, quiet = TRUE)
plot(ocean)
st_crs(ocean)
ocean_europe <- sf::st_intersection(ocean, st_set_crs(
st_as_sf(as(raster::extent(-12, 58, 36, 71), "SpatialPolygons")), st_crs(ocean)))
ocean_europe
plot(ocean_europe)
bbox <- matrix(c(0,0,10,0,10,10,0,10,0,0), ncol = 2, byrow = TRUE)
bbox
xmin <- -12; xmax <- 58; ymin <- 36; ymax <- 71
bbox <- matrix(c(xmin,ymin,xmax,ymin,xmax,ymax,xmin,ymax,xmin,ymin), ncol = 2, byrow = TRUE)
bbox
bbox <- matrix(c(xmin,ymin,xmax,ymin,xmax,ymax,xmin,ymax,xmin,ymin), ncol = 2, byrow = TRUE)
bbox_st <- st_polygon(x = bbox)
bbox_st <- st_polygon(x = list(bbox))
bbox_st
plot(bbox_st)
ocean_europe <- sf::st_intersection(ocean, bbox_st)
bbox_st <- st_polygon(x = list(bbox)) %>% st_set_crs(st_crs(ocean))
bbox_sf <- st_as_sf(st_polygon(x = list(bbox))) %>% st_set_crs(st_crs(ocean))
st_polygon(x = list(bbox))
dum <- st_polygon(x = list(bbox))
clas(dum)
class(dum)
set_crs
?set_crs
st_polygon(x = list(bbox))
st_as_sf(st_polygon(x = list(bbox)))
st_sf(st_polygon(x = list(bbox)))
st_sfc(st_polygon(x = list(bbox)))
bbox_sf <- st_sfc(st_polygon(x = list(bbox))) %>% st_set_crs(st_crs(ocean))
bbox_sf
ocean_europe <- sf::st_intersection(ocean, bbox_sf)
plot(ocean_europe)
plot(bbox_sf)
ocean_europe <- sf::st_intersection(ocean, bbox_sf)
ocean_europe
head(ocean_europe)
plotocean_europe)
plot(ocean_europe)
rm(list=ls())
ocean_shapefile <- "data/input_data/vector_layers/ne_50m_ocean.shp"
ocean <- sf::st_read(ocean_shapefile, quiet = TRUE)
xmin <- -12; xmax <- 58; ymin <- 36; ymax <- 71
bbox <- matrix(c(xmin,ymin,xmax,ymin,xmax,ymax,xmin,ymax,xmin,ymin), ncol = 2, byrow = TRUE)
st_polygon(x = list(bbox))
bbox_sf <- st_sfc(st_polygon(x = list(bbox))) %>% st_set_crs(st_crs(ocean))
ocean_europe <- sf::st_intersection(ocean, bbox_sf)
plot(ocean_europe)
plot(ocean_europe)
plot(ocean)
plot(bbox_sf, col-NA, border = 'red', add = T)
plot(bbox_sf$geom, col-NA, border = 'red', add = T)
plot(bbox_sf, col=NA, border = 'red', add = T)
plot(ocean$geometry)
plot(bbox_sf, col=NA, border = 'red', add = T)
ocean_europe <- sf::st_intersection(ocean, bbox_sf)
plot(ocean_europe$geometry)
st_crs(ocean)
ocean_europe <- sf::st_intersection(ocean, st_set_crs(
st_as_sf(as(raster::extent(-12, 58, 36, 71), "SpatialPolygons")), st_crs(ocean)))
plot(ocean_europe)
plot(ocean_europe@geometru)
plot(ocean_europe@geometry)
plot(ocean_europe$geometry)
ocean
plot(ocean$geometry)
land_shapefile <- "data/input_data/vector_layers/ne_50m_land.shp"
land <- sf::st_read(land_shapefile, quiet = TRUE)
plot(land$geometry)
bbox_sf <- st_sfc(st_polygon(x = list(bbox))) %>% st_set_crs(st_crs(ocean))
plot(bbox_sf$geom, col-NA, border = 'red', add = T)
plot(bbox_sf$geom, col=NA, border = 'red', add = T)
land_europe <- sf::st_intersection(land, bbox_sf)
plot(land_europe)
ocean_europe <- sf::st_intersection(ocean, bbox_sf)
plot(ocean_europe)
ocean_europe <- sf::st_crop(ocean, bbox_sf)
plot(ocean_europe)
box = c(xmin = 0, ymin = 0, xmax = 1, ymax = 1)
box
ocean_europe <- sf::st_crop(ocean, y = c(xmin = xmin, ymin = ymin, xmax = xmax, ymax = ymax))
ocean_europe
plot(ocean)
plot(ocean_europe)
plot(ocean_europe$geometry)
ocean_europe <- sf::st_intersection(ocean, bbox_sf)
ocean_europe <- sf::st_crop(ocean, y = c(xmin = xmin, ymin = ymin, xmax = xmax, ymax = ymax))
ocean
xmin <- -12; xmax <- 48; ymin <- 36; ymax <- 71
ocean_europe <- sf::st_crop(ocean, y = c(xmin = xmin, ymin = ymin, xmax = xmax, ymax = ymax))
plot(ocean_europe)
head(ocean)
ocean_europe <- sf::st_crop(ocean$geometry, y = c(xmin = xmin, ymin = ymin, xmax = xmax, ymax = ymax))
plot(ocean_europe)
st_set_crs(ocean, crs = 4326)
st_set_crs
?st_set_crs
ocean_europe <- sf::st_crop(ocean, y = c(xmin = xmin, ymin = ymin, xmax = xmax, ymax = ymax))
ocean_europe
plot(ocean_europe)
xmin <- -12; xmax <- 58; ymin <- 36; ymax <- 71
ocean_2 <- ocean %>% st_transform(crs = 4326)
ocean_2
ocean
ocean_europe <- sf::st_crop(ocean2, y = c(xmin = xmin, ymin = ymin, xmax = xmax, ymax = ymax))
ocean_2 <- ocean %>% st_transform(crs = 4326)
ocean_europe <- sf::st_crop(ocean2, y = c(xmin = xmin, ymin = ymin, xmax = xmax, ymax = ymax))
ocean %>% st_transform(crs = 4326)
ocean_2 <- st_transform(ocean, crs = 4326)
ocean_2
ocean_europe <- sf::st_crop(ocean2, y = c(xmin = xmin, ymin = ymin, xmax = xmax, ymax = ymax))
ocean_europe <- sf::st_crop(ocean_2, y = c(xmin = xmin, ymin = ymin, xmax = xmax, ymax = ymax))
ocean_europe
plot(ocean_europe$geom)
plot(bbox_sf$geom, col = NA, border = 'red', add = T)
ocean_europe <- sf::st_intersection(ocean, st_set_crs(
st_as_sf(as(raster::extent(-12, 58, 36, 71), "SpatialPolygons")), st_crs(ocean)))
plot(ocean_europe)
